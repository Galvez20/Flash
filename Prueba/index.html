<!DOCTYPE html>
<html lang="es">

  <head>
    <link rel="stylesheet" type="text/css" href="estilo.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.6.0/gsap.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.6.0/Draggable.js"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
    <title>Figuras</title>
  </head>
    <body>
      <link href='https://fonts.googleapis.com/css?family=Signika+Negative:300,400,700' rel='stylesheet' type='text/css'>

      <h1>Draggables will swap position if you drop them on top of each other</h1>
      
      <div id="container">
        <div id="box1" class="box">box1</div>
        <div id="box2" class="box">box2</div>
        <div id="box3" class="box">box3</div>
      </div>
      <script>
      //see https://www.greensock.com/draggable/ for more details.


console.clear();

var droppables = $(".box");

//stack droppables vertically
TweenMax.staggerTo(droppables, 0, {cycle:{y:[0, 100, 200]}})

//the overlapThreshold can be a percentage ("50%", for example, would only trigger when 50% or more of the surface area of either element overlaps) or a number of pixels (20 would only trigger when 20 pixels or more overlap), or 0 will trigger when any part of the two elements overlap.
var overlapThreshold = "20%"; 

//we'll call onDrop() when a Draggable is dropped on top of one of the "droppables", and it'll make it "flash" (blink opacity). Obviously you can do whatever you want in this function.
function onDrop(dragged, dropped) {
  //TweenMax.fromTo(dropped, 0.1, {opacity:1}, {opacity:0, repeat:3, yoyo:true});
  
}

Draggable.create(droppables, {
  bounds:window,
  onPress: function() {
    this.startX = this.target._gsTransform.x;
    this.startY = this.target._gsTransform.y;
    console.log("x: ", this.startX , " y: ", this.startY)
  },
  onDrag: function(e) {
    var i = droppables.length;
		 while (--i > -1) {
       if (this.hitTest(droppables[i], overlapThreshold)) {
         $(droppables[i]).addClass("highlight");
       } else {
         $(droppables[i]).removeClass("highlight");
       }
       
    }
  },
  onDragEnd:function(e) {
		var i = droppables.length;
		while (--i > -1) {
			if (this.hitTest(droppables[i], overlapThreshold)) {
        var droppable = droppables[i]
				$(droppable).removeClass("highlight");
        console.log(droppable._gsTransform.x, droppable._gsTransform.y)
        TweenMax.to(this.target, 0.2, {x:droppable._gsTransform.x, y:droppable._gsTransform.y})
        TweenMax.to(droppable, 0.2, {x:this.startX, y:this.startY})
			}
		}
	}
});
      </script>
    </body>
</html>